"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74742],{23415:(e,t,r)=>{r.d(t,{J9:()=>n,M5:()=>a});var i=r(18652),a=()=>{var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,i.format)({pathname:e})}},n=()=>{var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,i.format)({pathname:e})}}},83550:(e,t,r)=>{r.d(t,{Df:()=>p,WP:()=>v,Xl:()=>l,bE:()=>d,bR:()=>f,cb:()=>u,dt:()=>c,fh:()=>_,h_:()=>m,vY:()=>g,vv:()=>h});var i=r(51895),a=r(91025),n=r(35841),s=r(18652),o=e=>{var{urlParams:t={},queryParams:r={}}=e,a="/cart/".concat(t.isPrimary?n.jT:n.pw),o=(0,i._)({},r);return{url:a,defaultParams:o,formattedUrl:(0,s.format)({pathname:a,query:o})}},l=function(){var{urlParams:e={},queryParams:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o({urlParams:e,queryParams:t}),n=(0,i._)({},r.defaultParams);return(0,a._)((0,i._)({},r),{defaultParams:n,formattedUrl:(0,s.format)({pathname:r.url,query:n})})},c=o,d=o,u=e=>{var{urlParams:t={},queryParams:r={}}=e,a="/cart/".concat(t.fromCartType,"/to/").concat(t.toCartType),n=(0,i._)({},r);return{url:a,defaultParams:n,formattedUrl:(0,s.format)({pathname:a,query:n})}},v=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations/").concat(t.status);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},m=e=>{var{urlParams:t={}}=e,r="/account/user/".concat(t.id,"/settings");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},p=e=>{var{urlParams:t={}}=e,r="/account/user/".concat(t.id,"/settings");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},_=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations/").concat(t.invitationId);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},f=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},h=e=>{var{urlParams:t={}}=e,r="/organization/users/".concat(t.id);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},g=function(){var{queryParams:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/cart/".concat(n.jT,"/quote"),r=(0,a._)((0,i._)({},e),{exclude_comps:1,expand:"agreements"});return{url:t,defaultParams:r,formattedUrl:(0,s.format)({pathname:t,query:r})}}},74742:(e,t,r)=>{r.r(t),r.d(t,{MosaicAssetGridWithViews:()=>b});var i=r(51895),a=r(91025),n=r(31085),s=r(8558),o=r(96353),l=r(46696),c=r(73475),d=r(71676),u=r(69612),v=r(56880),m=r(87669),p=r(12580),_=e=>{var{assetOverlayProps:t}=e,r=(0,o._)(e,["assetOverlayProps"]),{assets:s,hideAddToCart:_,hideSimilarAction:f,onAddToCollectionsComplete:h,listId:g,showInlineSimilarity:y}=r,{assetType:b}=(0,p.BF)(),{AddToCartViews:C,addToCartViewsHandler:w,addToCartViewsProps:S}=(0,d.k)(),{AddToCollectionViews:I,addToCollectionViewsHandler:A,addToCollectionViewsProps:T,isModalOpen:k,handleCloseModal:E,collectionProps:P}=(0,u.X)({initialAssetType:b}),{PreviewModal:x,previewModalProps:j,onAssetModalHandler:U}=(0,c.l)({addToCartViewsHandler:w,addToCollectionViewsHandler:A,assets:s,compLicensingHandler:null,licensingAssetId:null,withGoToPageAction:!0,withNavigationArrows:!0,listId:g,SecondaryActionsComponent:void 0,analyticsEventSection:void 0}),z=(0,m.sD)(null==s?void 0:s[0]);return(0,n.jsxs)(n.Fragment,{children:[k&&(0,n.jsx)(v.p,(0,i._)({modalIsOpen:k,handleClose:E},z&&{collectionProps:P})),(0,n.jsx)(l.MosaicAssetGrid,(0,i._)({assetOverlayProps:(0,i._)({listId:g,addToCartViewsHandler:w,addToCollectionViewsHandler:A,onAssetModalHandler:U,shouldHideOnImageMobile:!0},t),showInlineSimilarity:y},r)),(0,n.jsx)(C,(0,i._)({},S)),(0,n.jsx)(I,(0,i._)({onAddToCollectionsComplete:h},T)),(0,n.jsx)(x,(0,a._)((0,i._)({},j),{hideAddToCart:_,hideSimilarAction:f,showActionIcons:!0}))]})},f=r(47700),h=e=>{var{assetOverlayProps:t}=e,r=(0,o._)(e,["assetOverlayProps"]),{assets:s,hideAddToCart:v,onAddToCollectionsComplete:m,listId:_,showInlineSimilarity:h}=r,{assetType:g}=(0,p.BF)(),{CompLicensingViews:y,licensingAssetId:b,compLicensingProps:C,compLicensingHandler:w}=(0,f.x)(),{AddToCartViews:S,addToCartViewsHandler:I,addToCartViewsProps:A}=(0,d.k)(),{AddToCollectionViews:T,addToCollectionViewsHandler:k,addToCollectionViewsProps:E}=(0,u.X)({initialAssetType:g}),{PreviewModal:P,previewModalProps:x,onAssetModalHandler:j}=(0,c.l)({addToCartViewsHandler:I,addToCollectionViewsHandler:k,assets:s,compLicensingHandler:w,licensingAssetId:b,withGoToPageAction:!0,withNavigationArrows:!0,listId:_,SecondaryActionsComponent:void 0,analyticsEventSection:void 0});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.MosaicAssetGrid,(0,i._)({assetOverlayProps:(0,i._)({listId:_,addToCartViewsHandler:I,addToCollectionViewsHandler:k,compLicensingHandler:w,licensingAssetId:b,onAssetModalHandler:j},t),showInlineSimilarity:h},r)),(0,n.jsx)(S,(0,i._)({},A)),(0,n.jsx)(T,(0,i._)({onAddToCollectionsComplete:m},E)),(0,n.jsx)(P,(0,a._)((0,i._)({},x),{hideAddToCart:v,showActionIcons:!0})),(0,n.jsx)(y,(0,i._)({},C))]})},g=r(48976),y=r(79487),b=e=>{var{setThroughProvider:t,assets:r,isBrandSstk:o}=(0,s.N)(),{isBrandEnterprise:l}=(0,g.P)(),c=(0,y.a)(),{assets:d}=e,u=t?r:d;switch("".concat(c?"MOBILE":"DESKTOP","_").concat((t?o:!l)?"ECOMM":"ENTERPRISE")){case"MOBILE_ENTERPRISE":case"DESKTOP_ENTERPRISE":return(0,n.jsx)(h,(0,a._)((0,i._)({},e),{assets:u}));default:return(0,n.jsx)(_,(0,a._)((0,i._)({},e),{assets:u}))}}},71676:(e,t,r)=>{r.d(t,{z:()=>x,k:()=>j});var i=r(49253),a=r(31085),n=r(44537),s=r(23297),o=r(14041),l=r(51895),c=r(96353),d=r(73260),u=r(45412),v=r(15129),m=r(83894),p=r.n(m),_=p()(()=>Promise.all([r.e(27510),r.e(72076),r.e(6885),r.e(95822),r.e(35759),r.e(14332),r.e(75083),r.e(50496),r.e(27273)]).then(r.bind(r,71694)).then(e=>({default:e.AddToCartDialog})),{loadableGenerated:{webpack:()=>[71694]},ssr:!1}),f=p()(()=>Promise.all([r.e(27510),r.e(72076),r.e(6885),r.e(95822),r.e(35759),r.e(14332),r.e(75083),r.e(50496),r.e(27273),r.e(49414)]).then(r.bind(r,5519)).then(e=>({default:e.AddToCartDialogLedger})),{loadableGenerated:{webpack:()=>[5519]},ssr:!1}),h=e=>{var{isActive:t}=e,r=(0,c._)(e,["isActive"]),i=(0,s.G)(t),n=(0,u.h)(),o=(0,v.U)(d.bW,!1)&&(null==n?void 0:n.userCanViewPortfolio);return i&&(0,a.jsx)(o?f:_,(0,l._)({isActive:t},r))},g=r(91025),y=r(3319),b=r(88863),C=r(94722),w=r(25888),S=r(35841),I=r(75096),A=r(48976),T=r(74299),k=e=>{var{status:t,isSizeLimitWarning:r,alertLabels:i}=e;return r?i.sizeLimitWarning:t===w.qO?i.addToCartSuccess:i.addToCartWarning},E=e=>{var{isOpen:t,isSizeLimitWarning:r=!1,addToCartStatus:i,snackBarActionAllowed:n=!0,handleSnackbarClose:s}=e,{t:o}=(0,T.Bd)(y.evH),{status:c,error:d}=i,u={addToCartSuccess:o("common:actions_added_to_cart"),addToCartWarning:o("notifications:label_add_to_cart_failure"),sizeLimitWarning:o("ent:cart_size_limit_warning",{LIMIT:S.Zm}),viewActionLabel:o("common:actions_view")},v=k({status:c,isSizeLimitWarning:r,alertLabels:u}),{isBrandEnterprise:m}=(0,A.P)(),{viewCartAction:p}=(0,b.Z)(),_=(0,I.Y)(),f={onClick:()=>{s(),m?_():p()},label:u.viewActionLabel};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(C.DynamicSnackbar,(0,g._)((0,l._)({},i.status===w.qO&&n&&{alertAction:f}),{alertSeverity:c,error:d,handleSnackbarClose:s,isOpen:t&&!!c,message:v}))})},P={status:"",error:void 0},x=e=>{var{addToCartStatus:t=P,assets:r=null,eventLabel:i,gridItems:n=null,isAddToCartDialogActive:o,isPrimary:l,isSnackBarOpen:c,isSizeLimitWarning:d,onAddToCart:u,onAlertSnackbarClose:v,setIsAddToCartDialogActive:m,pageSection:p,listId:_,snackBarActionAllowed:f=!0}=e;return(0,s.G)(r)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{assets:r,eventLabel:i,gridItems:n,isActive:o,isPrimary:l,listId:_,onAddToCart:u,pageSection:p,setIsActive:m}),(0,a.jsx)(E,{snackBarActionAllowed:f,addToCartStatus:t,handleSnackbarClose:v,isOpen:c,isSizeLimitWarning:d})]}):null},j=function(){var e,t,{withOptimisticUpdate:r=!0,setIsVerifying:a,snackBarActionAllowed:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),[v,m]=(0,o.useState)(null),[p,_]=(0,o.useState)(null),[f,h]=(0,o.useState)(!0),[g,y]=(0,o.useState)(null),[b,C]=(0,o.useState)(null),[w,S]=(0,o.useState)(null),{addCartItems:I,moveToSaveForLater:A,moveToPrimary:T,addToCartStatus:k,isSizeLimitWarning:E,notAddedSelectVideos:P}=(0,n.Nc)();(0,o.useEffect)(()=>()=>m(null),[]);var j=(0,o.useCallback)(e=>{var{assets:t,eventLabel:i,licenseId:n,formatType:s,licensePrice:o,cart:l,mutateCart:c,notAddedSelectVideoIds:d,pageSection:m,listId:_}=e;null==a||a(!0),u(!0),I({cart:l,eventLabel:i,gridItems:p,isPrimary:f,itemsToAdd:t||v,licenseId:n,formatType:s,licensePrice:o,mutateCart:c,notAddedSelectVideoIds:d,withOptimisticUpdate:r,pageSection:m,listId:_})},[v,p,I,f,a,r]),U=(0,o.useCallback)((e=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:n}=e;null==a||a(!0),u(!0);try{yield T({itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:n})}catch(e){null==a||a(!1)}}),function(t){return e.apply(this,arguments)}),[T,a]),z=(0,o.useCallback)((t=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,savedForLaterCart:i,mutatePrimaryCart:n,mutateSavedForLaterCart:s}=e;null==a||a(!0),u(!0);try{yield A({itemsToMove:t,primaryCart:r,savedForLaterCart:i,mutatePrimaryCart:n,mutateSavedForLaterCart:s})}catch(e){null==a||a(!1)}}),function(e){return t.apply(this,arguments)}),[A,a]);return{addToCartViewsProps:(0,o.useMemo)(()=>({addToCartStatus:k,assets:v,eventLabel:w,gridItems:p,isAddToCartDialogActive:l,isPrimary:f,isSizeLimitWarning:E,isSnackBarOpen:d,onAddToCart:j,onAlertSnackbarClose:()=>u(!1),notAddedSelectVideos:P,setIsAddToCartDialogActive:c,pageSection:g,listId:b,snackBarActionAllowed:s}),[v,p,k,w,b,g,l,f,E,d,P,j,s]),addToCartViewsHandler:(0,o.useCallback)(e=>{var{assets:t,eventLabel:r,gridItems:i,isMoveToPrimaryCart:a=!1,isMoveToSavedForLaterCart:n=!1,isPrimaryCart:s=!0,mutatePrimaryCart:o,mutateSavedForLaterCart:l,primaryCart:d,savedForLaterCart:u,withDialog:v=!0,licenseId:p,licensePrice:f,pageSection:g,listId:b}=e;if(m(t),h(s),y(g),S(r),C(b),i&&_(i),a){U({itemsToMove:t,primaryCart:d,mutatePrimaryCart:o,mutateSavedForLaterCart:l});return}if(n){z({itemsToMove:t,primaryCart:d,savedForLaterCart:u,mutatePrimaryCart:o,mutateSavedForLaterCart:l});return}v?c(!0):j({assets:t,eventLabel:r,cart:d,licenseId:p,licensePrice:f,mutateCart:o,pageSection:g})},[j,U,z]),AddToCartViews:x}}},47700:(e,t,r)=>{r.d(t,{x:()=>U});var i=r(49253),a=r(3319),n=r(55228),s=r(77427),o=r(24091),l=r(66969),c=r(10799),d=r(43336),u=r(48204),v=r(50717),m=r(74299),p=r(14041),_=r(31085),f=r(83079),h=r(51895),g=r(96353),y=r(23297),b=r(83894),C=r.n(b),w=C()(()=>r.e(3530).then(r.bind(r,40543)).then(e=>({default:e.CompLicensingDialog})),{loadableGenerated:{webpack:()=>[40543]},ssr:!1}),S=e=>{var{isOpen:t}=e,r=(0,g._)(e,["isOpen"]);return(0,y.G)(t)&&(0,_.jsx)(w,(0,h._)({isOpen:t},r))},I=C()(()=>Promise.all([r.e(27510),r.e(6885),r.e(35759),r.e(14332),r.e(75083),r.e(95131),r.e(25133)]).then(r.bind(r,67047)).then(e=>({default:e.CompLicensingDrawer})),{loadableGenerated:{webpack:()=>[67047]},ssr:!1}),A=e=>{var{isOpen:t}=e,r=(0,g._)(e,["isOpen"]);return(0,y.G)(t)&&(0,_.jsx)(I,(0,h._)({isOpen:t},r))},T=C()(()=>r.e(55459).then(r.bind(r,97042)).then(e=>({default:e.CompLicensingSnackbar})),{loadableGenerated:{webpack:()=>[97042]},ssr:!1}),k=e=>{var{isOpen:t}=e,r=(0,g._)(e,["isOpen"]);return(0,y.G)(t)&&(0,_.jsx)(T,(0,h._)({isOpen:t},r))},E=r(51778),P=function(){var{licensingError:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t}=(0,m.Bd)(a.mAv);return{cancel:t("common:actions_cancel"),downloadComp:t("common:actions_download_comp"),enterpriseCompLicense:t("ent:license_enterprise_comp"),genericErrorMessage:t("ent:license_now_error_message"),licensingError:(0,E.KC)({error:e,t}),licenseSuccess:t("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:t("common:actions_download_comp"),disclaimer:(0,_.jsx)(m.x6,{i18nKey:"ent:comp_disclaimer",ns:a.mAv,components:{bold:(0,_.jsx)("strong",{})}}),addMetadataToAsset:t("ent:add_metadata_to_asset_comp"),metadataFound:t("ent:previous_metadata_found_comp"),metadataMissing:t("ent:previous_metadata_missing_comp"),title:t("ent:add_metadata_to_comp")}}},x=e=>{var{assets:t=null,compLicensingHandler:r,isDialogOpen:i=!1,isDrawerOpen:a=!1,isLicensing:n=!1,isSnackBarOpen:s=!1,licensingError:o=f.vB,onDialogClose:l,onDrawerClose:c,onSnackbarClose:d,selectedAssetSize:u="",setSelectedAssetSize:v,settingsData:m=f.vB}=e,p=P({licensingError:o});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S,{assets:t,isOpen:i,onClose:l,onLicense:r,labels:p,isLicensing:n,selectedAssetSize:u,setSelectedAssetSize:v,settingsData:m}),(0,_.jsx)(A,{assets:t,isLicensing:n,isOpen:a,labels:p,onClose:c,onLicense:r,selectedAssetSize:u}),(0,_.jsx)(k,{isOpen:s,message:p.licensingError,onClose:d})]})},j=r(53117),U=function(){var e,t,r,{allowMetadata:_=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[f,h]=(0,p.useState)(null),[g,y]=(0,p.useState)(""),[b,C]=(0,p.useState)(""),[w,S]=(0,p.useState)(!1),[I,A]=(0,p.useState)(!1),[T,k]=(0,p.useState)(!1),{isLicensing:E,licensingError:P,licensingStatus:U,setLicensingStatus:z,licensingAssetsHandler:O}=(0,u.mA)(),L=(0,o.$)(),{data:N}=(0,v.M)(),M=(0,d.Y)(N),F=(0,n.Q)(),{t:R}=(0,m.Bd)(a.EJ3),D=R("file_name_edited"),{getSearchContext:q}=(0,l.J)(),{queueIpReview:B}=(0,c.F)({trackingId:null===(r=q())||void 0===r?void 0:r.search_tracking_id}),G=(0,p.useCallback)((e=(0,i._)(function*(e){var{assets:t=[],assetSize:r,eventLabel:i,format:a,metadata:n,pageSection:s,listId:o}=e;y(t[0].id);var l=!1;try{var c=yield(0,j.lw)({assets:t,assetSize:r,format:a,metadata:n,selectedAssetSize:b}),{data:d}=yield O(c);if(!((0,j.CN)(t)&&1===t.length)){var u,v,m=(0,j.sD)(t)?M:void 0,p=(null==F?void 0:null===(u=F.current)||void 0===u?void 0:u.isPeacock)?e=>{var r;return F.current.downloader.resolveUrl(t[0],e,D,null==d?void 0:null===(r=d.meta)||void 0===r?void 0:r.licensedContent)}:void 0;yield(0,j.jZ)({assets:t,compSize:m,licensedContent:null==d?void 0:null===(v=d.meta)||void 0===v?void 0:v.licensedContent,downloader:p}),L({assets:t,eventLabel:i,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:s,listId:o})}}catch(e){l=e}return B(t),y(""),l&&!I&&k(!0),{error:l}}),function(t){return e.apply(this,arguments)}),[I,M,O,L,b,D,F,B]),Y=(0,p.useCallback)((t=(0,i._)(function*(e){var{assets:t,assetSize:r,format:i,eventLabel:a,metadata:n,pageSection:o,listId:l}=e;return(h(t),z(""),!w&&(0,s.wy)(t))?(S(!0),Promise.resolve(null)):!I&&(null==N?void 0:N.requireMetadataForComp)&&!n&&_?(r&&C(r),A(!0),Promise.resolve(null)):G({assets:t,assetSize:r,eventLabel:a,format:i,metadata:n,pageSection:o,listId:l})}),function(e){return t.apply(this,arguments)}),[_,G,w,I,N,z]),W=(0,p.useMemo)(()=>({assets:f,compLicensingHandler:Y,compLicensingRequest:G,isDialogOpen:w,isDrawerOpen:I,isLicensing:E,isSnackBarOpen:T,licensingError:P,onDialogClose:()=>S(!1),onDrawerClose:()=>A(!1),onSnackbarClose:()=>k(!1),selectedAssetSize:b,setSelectedAssetSize:C,settingsData:N}),[f,Y,G,w,I,E,T,P,b,N]);return{assetsToLicense:f,compLicensingHandler:Y,compLicensingProps:W,CompLicensingViews:x,licensingAssetId:g,licensingStatus:U}}},53117:(e,t,r)=>{r.d(t,{CN:()=>b,e4:()=>_,jZ:()=>f,lw:()=>y,sD:()=>C});var i=r(49253),a=r(51895),n=r(91025),s=r(29380),o=r(63870),l=r(45182),c=r(93255),d=r(27374),u=r(39385),v=r(87669),m=r(43495),p=r(74490),_=function(){var e=(0,i._)(function*(e){var{assets:t,compSize:r,licensedContent:i,supplementalUrlType:a}=e,{downloadUrl:n,contentId:s,contentFormat:l,contentSize:c,supplementalUrls:u}=i[0]||{};if((null==u?void 0:u.length)&&a){var{url:m=n}=u.find(e=>{var{type:t}=e;return t===a})||{};return m}var _=t.find(e=>{var{id:t}=e;return t===s})||{},f=(0,v.f0)(_),{filename:h,shouldUpdateFilename:g}=(0,d.V)({assets:t,contentId:s});if(g)try{var{data:y}=yield p.Bn.post((0,o.Xt)().formattedUrl,{data:[{media_id:_.id,media_type:f,comp_size:r,media_size:c,media_format:l,filename:h}]}),{attributes:b}=(null==y?void 0:y.data[0])||{};return b.url||n}catch(e){}return n});return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,i._)(function*(e){var{assets:t=[],compSize:r,assetSize:i,licensedContent:a=[],downloader:n=m.Bx}=e;if(a.length>1){var o=(0,d.P)({assets:t,licensedContent:a}),l=(0,s.E)({urlParams:{filename:o.bundleFilename}}).formattedUrl,{data:c}=yield p.a8.post(l,o.content),{public_url:u}=c;return n(u)}return n((yield _({assets:t,compSize:r,assetSize:i,licensedContent:a})))});return function(t){return e.apply(this,arguments)}}(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>{var t=(0,u.xB)({asset:e});return(0,n._)((0,a._)({},e),{assetType:t,licenseId:c.H8E[t]})})},g=function(){var e=(0,i._)(function*(){var{url:e}=(0,o.PX)();try{return(yield p.Bn.get(e).then(e=>null==e?void 0:e.data)).reduce((e,t)=>(0,n._)((0,a._)({},e),{[t.name]:"-"}),{})}catch(e){return{}}});return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,i._)(function*(){var{assets:e,assetSize:t,format:r,metadata:i,selectedAssetSize:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i;return n||(n=yield g()),{assets:h(e),format:r||"",licenseMetadata:n,licensingType:c.jO3,selectedAssetSize:t||a||"",isVideoComp:!0}});return function(){return e.apply(this,arguments)}}(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,u.ZC)({asset:e[0]||{}})===l.FY},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[l.vo,l.W1,l.kc].includes((0,u.ZC)({asset:e[0]||{}}))}},56880:(e,t,r)=>{r.d(t,{p:()=>a});var i=r(83894),a=r.n(i)()(()=>Promise.all([r.e(27510),r.e(74782)]).then(r.bind(r,29086)).then(e=>({default:e.SignUpModal})),{loadableGenerated:{webpack:()=>[29086]},ssr:!1})},27374:(e,t,r)=>{r.d(t,{P:()=>c,V:()=>l});var i=r(87669),a=r(80546),n="shutterstock",s="shutterstock_editorial",o=e=>{var{asset:t}=e;return(0,i.Uh)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,i.zz)({asset:t})?{prefix:s,shouldUpdateFilename:!1}:{prefix:n,shouldUpdateFilename:!1}},l=e=>{var{assets:t,contentId:r}=e,{prefix:i,shouldUpdateFilename:a}=o({asset:t.find(e=>{var{id:t}=e;return t===r})||{}});return{filename:"".concat(i,"_").concat(r),shouldUpdateFilename:a}},c=e=>{var{assets:t=[],licensedContent:r=[]}=e,o=t.every(e=>(0,i.zz)({asset:e})),c=r.map(e=>{var{contentId:r,downloadUrl:i,contentFormat:a}=e,{filename:n}=l({assets:t,contentId:r}),s=i.split("/").pop().split(".").pop();return(s.length>4||s.length<2)&&(s=a),{filename:"".concat(n,".").concat(s),url:i}}),d=(0,a.kX)();return{bundleFilename:"".concat(o?s:n,"_").concat(d,".zip"),content:c}}},4419:(e,t,r)=>{r.d(t,{l:()=>a});var i=r(63522),a=e=>{var t,{user:r}=e;return null==r?void 0:null===(t=r.roles)||void 0===t?void 0:t.includes(i.lc)}},95680:(e,t,r)=>{r.d(t,{h:()=>c});var i=r(58837),a=r(98870),n=r(4079),s=r(93703),o=r(62719),l=e=>{var{acc:t,totalCostOfItems:r,amountRemaining:a,totalAmount:n,bypassLowBalance:s=!1}=e;return s||(r>a&&(t.hasInsufficientSubscriptionCredits=!0,t.hasLowDebitableBalance=!1,t.insufficientAmount=r-a),!t.hasInsufficientSubscriptionCredits&&a<=n*i.O7&&(t.hasLowDebitableBalance=!0)),t},c=e=>{var{items:t,subscriptions:r,subscription:c,hasWrapperSubscription:d=!0}=e;if(t&&t.length){var u={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:i.EV};return t.reduce((e,t)=>{var u,{licenseId:v,price:m}=t,p=(0,n.W)({assets:[t]}),_=c||(0,o.A)({subscriptions:null===(u=(0,s.s)({assetType:p,subscriptions:r}))||void 0===u?void 0:u.subscriptions,licenseName:v,assetType:p})||{},{totalAmount:f,amountRemaining:h,amountType:g,amount:y}=(0,a.hY)(_);e.amountType=g;var b=parseFloat(m),C=parseFloat(e.total)+b;if(e.total+=b,g===i.zy){var w=parseFloat(y),S=parseFloat(e.totalCreditAmount)+w;return e.totalCreditAmount+=w,l({acc:e,totalCostOfItems:S,amountRemaining:h,totalAmount:f,bypassLowBalance:!d})}return l({acc:e,totalCostOfItems:C,amountRemaining:h,totalAmount:f,bypassLowBalance:!d})},u)}var v=r||{},m=Object.keys(v).find(e=>Array.isArray(v[e])&&v[e].length),p=m&&(0,a.j6)({subscriptions:v[m]||[]})[0]||{},{totalAmount:_,amountRemaining:f,amountType:h}=(0,a.hY)(p);return{amountType:h,hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:f<=_*i.O7,insufficientAmount:null}}},95109:(e,t,r)=>{r.d(t,{E:()=>o});var i=r(58837),a=r(98870),n=r(75292),s=r(95680),o=e=>{var t,{items:r,isLoading:o,subscription:l,subscriptions:c,userCapabilities:d}=e;return o?{}:(l&&(t=l.creditType),c&&c.length>0&&(t=c[0].creditType),(0,a.fY)({userCapabilities:d})?(0,s.h)({items:r,subscription:l,subscriptions:c,hasWrapperSubscription:(0,a.GT)({userCapabilities:d})}):{amountType:t||i.EV,hasLowDebitableBalance:!1,hasInsufficientSubscriptionCredits:l&&0===(0,n.J)({subscription:l}),insufficientAmount:null})}},70143:(e,t,r)=>{r.d(t,{b:()=>o,q:()=>s});var i=r(58837),a=r(87669),n=r(58838),s=e=>{var{uniqueSubscription:t}=e;if(!t)return{};var{priceAsAbsolute:r,creditCurrency:s,product:o}=t,l=(0,n.t)({subscription:t}),c=null!=s?s:null==o?void 0:o.currency;if(!r){var{creditPrice:d,creditType:u=i.EV}=t;return{price:"".concat((0,a.YO)({price:d,isUnlimited:l})),priceType:u,currency:c}}var{price:v,priceType:m}=r;return{price:"".concat((0,a.YO)({price:v,isUnlimited:l})),priceType:m,currency:c}},o=e=>{var{uniqueSubscription:t}=e;if(!t)return{};var{currency:r,currencyCost:n}=t;return{price:"".concat((0,a.YO)({price:n,isUnlimited:!1})),priceType:i.EV,currency:r}}},4900:(e,t,r)=>{r.d(t,{i:()=>o});var i=r(55802),a=r(66969),n=r(18227),s=r(14041),o=()=>{var{analytics:e}=(0,n.pn)(),{getSearchContext:t}=(0,a.J)();return(0,s.useCallback)(r=>{var{assets:a=[]}=r,n=t(a[0]);e.productLicensed({products:a.map(e=>(0,i.Un)({asset:e,shouldGetSearchContextFromAsset:!0})),search_context:n})},[e,t])}},10799:(e,t,r)=>{r.d(t,{F:()=>f});var i=r(49253),a=r(51895),n=r(91025),s=r(71765),o=r(65288),l=r(39857),c=r(48976),d=r(85322),u=r(61491),v=r(92044),m=function(){var e=(0,i._)(function*(e){var{items:t,trackingId:r}=e;0!==t.length&&(yield(0,v.A)("/message-gateway/ip-review",(0,n._)((0,a._)({method:"POST",requireAuth:!0},(0,u.H)({trackingId:r})),{body:{media:t.map(e=>({mediaId:e}))}})))});return function(t){return e.apply(this,arguments)}}(),p=r(93402),_=r(14041),f=function(){var e,{trackingId:t="",updateRequestCache:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,d.s)("/"),{isBrandEnterprise:v}=(0,c.P)(),f=(0,p.jE)();return{queueIpReview:(0,_.useCallback)((e=(0,i._)(function*(e){if(v){var i,c,d=(Array.isArray(e)?e:[e]).reduce((e,t)=>(0,o.iu)(t)?[...e,String(t.id)]:e,[]);if(d.length){var p=(yield f.fetchQuery({queryKey:(0,l.IF)({assetIds:d}),queryFn:e=>{var{queryKey:t}=e;return(0,l.tz)(u,t)}})).reduce((e,t)=>(null==t?void 0:t.isIpReviewed)===!1&&(null==t?void 0:t.ipReviewStatus)!==s.eG?[...e,t]:e,[]);try{if(p.length){yield m({items:p.map(e=>null==e?void 0:e.classicId),trackingId:t});var _=p.map(e=>(f.setQueryData(e.queryKey,[(0,n._)((0,a._)({},e),{isIpReview:!1,ipReviewStatus:s.eG})]),f.invalidateQueries({queryKey:e.queryKey,predicate:t=>{var{queryKey:r}=t;return r===e.queryKey}})));yield Promise.all([...r?[r({reviewStatus:s.eG})]:[],..._])}}catch(e){null===(c=window.NREUM)||void 0===c||null===(i=c.noticeError)||void 0===i||i.call(c,e,{message:"Error adding assets to queue for IP review: ".concat(p.map(e=>null==e?void 0:e.classicId).join(", "),"\ntrackingId: ").concat(t)})}}}}),function(t){return e.apply(this,arguments)}),[v,f,u,t,r])}}},43336:(e,t,r)=>{r.d(t,{Y:()=>n});var i=r(4419),a=r(36908),n=e=>{var{data:t}=(0,a.rA)();return(0,i.l)({user:t})?null==e?void 0:e.compSizeImage:null==e?void 0:e.compSizeSubImage}},48204:(e,t,r)=>{r.d(t,{mA:()=>V});var i=r(49253),a=r(51895),n=r(91025),s=r(63870),o=r(25888),l=r(45182),c=r(83507),d=r(55185),u=r(93255),v=r(58837),m=r(81127),p=r(55802),_=r(22714),f=r(39385),h=r(51778),g=r(11838),y=r(61491),b=r(13847),C=r(58838),w=r(1134),S=r(62719),I=r(4900),A=r(48946),T=r(48976),k=r(87669),E=r(74490),P=r(14041),x=e=>{var t,{assets:r}=e,i=(0,k.f0)(r[0]);return{include:"subscriptions",content_type:(0,f.Uw)({assetType:i,assetId:null===(t=r[0])||void 0===t?void 0:t.id}),content_ids:r.reduce((e,t)=>[...e,t.id.toString()],[]).join(",")}},j=e=>{var{assets:t}=e,r={};return t.forEach(e=>{var t=(0,k.f0)(e),i=(0,f.Uw)({assetId:e.id,assetType:t});r[i]=[...r[i]?r[i]:[],e]}),r},U=e=>{var{assetEligibility:t}=e,{permittedLicenses:r,subscriptions:i}=t;return null==i?void 0:i.filter(e=>{var{license:t}=e;return r.includes(t.replace("_unlimited",""))})},z=e=>{var t,{assets:r=[],user:i}=e;return null===(t=Object.values(j({assets:r})))||void 0===t?void 0:t.map(e=>{var t=x({assets:e}),{formattedUrl:r}=(0,s.kE)({urlParams:{licenseeIdentifier:"organization-".concat(null==i?void 0:i.organizationId)},queryParams:t});return E.Bn.get(r)})},O=e=>{var{data:t}=e,r=[];return t.map(e=>{var t=e.id.split("-"),i=t[t.length-1],a=U({assetEligibility:e});return r.push({assetId:i,subscriptions:a})}),r},L=r(36908),N=r(5067),M=r(18227),F=r(34559),R=r(15004),D=r(57518),q=r(57794),B=r(69200),G={[u.jO3]:s.DH,[u.miZ]:s.E6},Y=e=>{var t,r,{asset:i,subscriptions:a}=e,n=(0,f.ZC)({asset:i}),{licenseId:s,contentTier:o}=i;switch(n){case l.G_:return(0,w.N)({assetType:l.G_,subscriptions:[...null!==(t=null==a?void 0:a.videoSubscriptions)&&void 0!==t?t:[],...null!==(r=null==a?void 0:a.videoCompSubscriptions)&&void 0!==r?r:[]],selectedLicenseId:s});case l.on:case l.FY:return(0,S.A)({subscriptions:[...a.musicSubscriptions,...a.musicCompSubscriptions],licenseName:i.licenseId});case l.M9:return(0,S.A)({subscriptions:[...a.sfxSubscriptions,...a.sfxCompSubscriptions],licenseName:i.licenseId});case l.uH:return(0,S.A)({subscriptions:[...a.editorialImageSubscriptions,...a.editorialImageCompSubscriptions,...a.editorialVideoSubscriptions,...a.editorialVideoCompSubscriptions],licenseName:i.licenseId,contentTier:o});case l.W1:default:return(0,S.A)({subscriptions:[...a.imageSubscriptions,...a.imageCompSubscriptions],licenseName:i.licenseId,contentTier:o})}},W=e=>{var{asset:t,subscriptions:r}=e,i=Y({asset:t,subscriptions:r});return(0,C.t)({subscription:i})?(0,n._)((0,a._)({},i),{creditPrice:l.Mp,creditType:v.EV}):i},V=()=>{var{isBrandEnterprise:e}=(0,T.P)(),{data:t}=(0,N.R7)(),[r,s]=(0,P.useState)(!1),[v,C]=(0,P.useState)(""),[S,k]=(0,P.useState)({}),{data:x}=(0,L.rA)(),[,j]=(0,R.Ry)(e=>e),U=(0,M.Jz)(),{analytics:Y}=(0,M.pn)(),V=(0,p.cv)(Y),Z=(0,b.H)(V),H=U||(0,D.vb)(),J=(0,I.i)(),X=(0,A.Z)(),$=(0,B.mj)(),{locale:K}=(0,m.Y)(),{sendOrderConfirmationEmails:Q}=(0,q.k)();return{isLicensing:r,licensingAssetsHandler:(0,P.useCallback)(function(){var r=(0,i._)(function*(r){var{alreadyLicensedAssets:v=[],assets:m=[],cartMetadata:p={},format:b="",licenseeMetadata:S={},isVideoComp:I=!1,licenseMetadata:A={},licensingType:T,selectedAssetSize:P=""}=r,U=(L=(0,i._)(function*(){var r,s=O({data:(yield Promise.all(z({assets:m,user:x}))).map(e=>{var{data:t}=e;return(0,F.A)(t)}).flat()}),o=m.map((r=(0,i._)(function*(e){var t=(0,f.ZC)({asset:e}),{licenseId:r}=e,{subscriptions:i}=(null==s?void 0:s.find(t=>{var{assetId:r}=t;return r===String(e.id)}))||{},{id:o,license:d}=(0,w.N)({assetType:t,subscriptions:i,selectedLicenseId:r})||{},u=yield(0,_.og)({asset:e,format:b,selectedAssetSize:P,licenseName:d,isVideoComp:I});return(0,n._)((0,a._)({},u,P&&g.N[P]&&{comp_size:P},t===l.M9&&{override_filename:"".concat(c.wT,"_").concat(e.id,".").concat(b||u.content_format)},t===l.m$&&{content_provider:l._Y}),{license_name:d,show_modal:!0,subscription_id:o})}),function(e){return r.apply(this,arguments)}));return{licensingPayload:{content:yield Promise.all(o),license_metadata:A,required_cookies:"",decode_hadron_ids:e},orderMetadata:m.map(e=>{var{currency:r,description:i,descriptionLanguageMap:a={},id:n,itemType:s,headline:o,licenseId:l,preview:c={},price:d,priceType:u,src:v,thumb:m,thumbImageUrl:p,title:_,type:f}=e,h=r,g=d,y=u;if(!h||!g||!y){var{creditCurrency:b,creditPrice:C,creditType:w}=W({asset:e,subscriptions:t});h=h||b,g=g||C,y=u||w}return h&&!N&&(N=h),y&&!M&&(M=y),{description:a[K]||i,formattedPrice:X({price:g,localeCurrencyOverride:h,priceType:y}),headline:o,id:n,itemType:s,licenseId:l,licenseName:$({licenseName:l}),price:g,priceType:y,thumbnailSrc:v||p||c.url||m,title:_,type:f}})}}),function(){return L.apply(this,arguments)});try{s(!0),C("");var L,N,M,R,D,{licensingPayload:q,orderMetadata:B}=yield U(),Y=G[T]({urlParams:{licenseeIdentifier:"organization-".concat(null==x?void 0:x.organizationId)}}).formattedUrl,V=yield E.Bn.post(Y,q,(0,y.H)((0,a._)({trackingId:H},Z?{headers:{[d.ed]:Z}}:{})));if(J({assets:m}),j({assets:m,metadata:p,licensedContent:(null===(D=(0,F.A)(V.data))||void 0===D?void 0:null===(R=D.meta)||void 0===R?void 0:R.licensedContent)||[]}),!m.some(e=>{var{licenseId:t}=e;return u.t9I.includes(t)})){var ee=B.filter(e=>!(0,h.en)({alreadyLicensedAssets:v,asset:e}));Q({cartTotalCurrency:N,filteredOrderMetadata:ee,licenseMetadata:S,priceType:M})}return C(o.qO),V}catch(e){var et,er,ei=(0,h.nR)({error:e,user:x});throw null===(er=window.NREUM)||void 0===er||null===(et=er.addPageAction)||void 0===et||et.call(er,"Enterprise licensing error",(0,n._)((0,a._)({},ei),{alreadyLicensedAssets:v,assets:m.map(e=>{var{id:t,type:r}=e;return{id:t,type:r}}),cartMetadata:p,format:b,licenseeMetadata:S,isVideoComp:I,licenseMetadata:A,licensingType:T,selectedAssetSize:P})),k(e),C(o.Nz),e}finally{s(!1)}});return function(e){return r.apply(this,arguments)}}(),[x,e,K,X,$,t,H,J,j,Q,Z]),licensingError:S,licensingStatus:v,setIsLicensing:s,setLicensingStatus:C}}},57794:(e,t,r)=>{r.d(t,{k:()=>w});var i=r(3319),a=r(23415),n=r(9444),s=r(10428),o=r(81127),l=r(51824),c=r(48946),d=r(50717),u=r(36908),v=r(86667),m=r(60932),p=r(74490),_=r(22717),f=r(74299),h=r(14041),g=new RegExp(s.X),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{emailCartCheckoutConfirmation:t,orderEmail:r}=e;return t&&r?r.split(",").filter(e=>g.test(e)):[]},b=e=>{var{purchaseOrder:t}=e;return"".concat(null==t?void 0:t[0]," : ").concat(null==t?void 0:t[1]).split(" ").map(e=>(0,_.Z)(e)).join(" ")},C=e=>{var{t,keys:{currentYear:r,emailAddress:i,purchaseOrder:a}}=e;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(b({purchaseOrder:a})),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},w=()=>{var{t:e}=(0,f.Bd)(i._RK),{data:t}=(0,u.rA)(),{data:r}=(0,v.M)(),{data:s}=(0,d.M)(),{name:_,email:g,phone:b}=(0,m.e)({fetchTrigger:!0})||{},{locale:w,fullLocale:S}=(0,o.Y)(),I=(0,c.Z)();return{sendOrderConfirmationEmails:(0,h.useCallback)(function(){var{cartTotalCurrency:i,filteredOrderMetadata:o,licenseMetadata:c,priceType:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=[...(null==r?void 0:r.emailCartCheckoutConfirmation)?[null==t?void 0:t.email]:[],...y(s)];if(u.length&&(null==o?void 0:o.length)){var v,m,f,h,A=C({t:e,keys:{currentYear:new Date().getFullYear(),emailAddress:null==t?void 0:t.email,purchaseOrder:Object.entries(c)[0],repName:_,repPhoneNumber:b,repEmail:g}});try{var T={cartItems:o,fullName:null==t?void 0:t.fullName,invoiceDate:new Intl.DateTimeFormat(S).format(new Date),labels:A,licenseMetadata:c,repEmail:g,repName:_,repPhoneNumber:b,totalAmount:I({price:(0,l.bc)(o,[]),localeCurrencyOverride:i,priceType:d}),username:null==t?void 0:t.username};p.Y$.post((0,a.J9)().formattedUrl,{emails:[...new Set(u)],emailBody:T,emailSubject:"".concat(A.emailSubjectLine),language:w})}catch(e){null===(m=window.NREUM)||void 0===m||null===(v=m.setTransactionName)||void 0===v||v.call(m,"sendOrderConfirmationEmail/".concat(n.o5)),null===(h=window.NREUM)||void 0===h||null===(f=h.noticeError)||void 0===f||f.call(h,e,{message:"Failed sending order confirmation emails to: ".concat(u.join(", "))})}}},[S,w,s,I,g,_,b,e,null==t?void 0:t.email,null==t?void 0:t.fullName,null==t?void 0:t.username,null==r?void 0:r.emailCartCheckoutConfirmation])}}},69200:(e,t,r)=>{r.d(t,{mj:()=>c});var i=r(3319),a=r(19393),n=r(48976),s=r(74299),o=r(14041),l="ent:license_",c=()=>{var{t:e}=(0,s.Bd)([i.Xek,i.fW6]),{isBrandSstk:t}=(0,n.P)();return(0,o.useCallback)(function(){var r,n,s,o,c,d,{licenseName:u,subscription:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u&&(r="".concat(l).concat(null==u?void 0:u.replace(/_unlimited/,""))),v){if(t){if((0,a.l2)({productName:null==v?void 0:null===(n=v.product)||void 0===n?void 0:n.name}))return e(r="".concat("product-names:").concat(null===(o=v.product)||void 0===o?void 0:o.name),{ns:i.fW6});r="".concat("ecomm:license_").concat(null===(s=v.product)||void 0===s?void 0:s.name)}!t&&v.redeemableFor&&(r="".concat(l).concat(null===(c=v.redeemableFor)||void 0===c?void 0:c.replace(/_unlimited/,""))),!t&&v.license&&(r="".concat(l).concat(null===(d=v.license)||void 0===d?void 0:d.replace(/_unlimited/,"")))}return r?e(r):""},[t,e])}},44537:(e,t,r)=>{r.d(t,{Fh:()=>H,Nc:()=>X,Uq:()=>V,Ym:()=>W,_R:()=>Z,ng:()=>J,tS:()=>$});var i=r(49253),a=r(51895),n=r(91025),s=r(96353),o=r(83550),l=r(25888),c=r(21347),d=r(94869),u=r(45182),v=r(35841),m=r(17442),p=r(82608),_=r(58837),f=r(57764),h=r(55802),g=r(22714),y=r(39385),b=r(87669),C=r(91758),w=r(98870),S=r(45790),I=r(58838),A=r(95109),T=r(62719),k=r(70143),E=r(70627),P=r(10799),x=r(5067),j=r(45412),U=r(74490),z=r(31242),O=r(14041),L=r(48917),N=r(29037),M=r(66969),F=r(36908),R="Size limit warning",D=e=>{var t,{item:r,subscriptions:i}=e,{itemType:a,metadata:n}=r,s=(0,b.Q)({asset:r}),o=null==n?void 0:null===(t=n.cart)||void 0===t?void 0:t.licenseId,{allSubscriptions:l}=i;switch(a){case u.G_:return(0,E.d)({licenseName:o,subscriptions:l});case u.FY:case u.M9:case u.W1:default:return(0,T.A)({licenseName:o,subscriptions:l,assetType:a,contentTier:s})}},q=e=>{var t,r,{item:i}=e;return(null===(t=i.largeThumb)||void 0===t?void 0:t.url)||(null===(r=i.preview)||void 0===r?void 0:r.url)||i.preview||i.thumb||""},B=e=>{var t,{asset:r}=e;return r.itemType===u.W1&&!r.sizes&&!(null===(t=r.metadata)||void 0===t?void 0:t.cart.sizes)},G=e=>{var t,r,{item:i}=e,s=(0,b.$9)(i);if(i.itemType===u.m$){var o,l,c,v,m,p,_,f,h,g,y,w=null==i?void 0:null===(f=i.product)||void 0===f?void 0:null===(_=f.productPreviews[0])||void 0===_?void 0:null===(p=_.previewThumbnailImages)||void 0===p?void 0:p.find(e=>{var{resolution:t}=e;return"res600x600"===t}),S={[d.jx]:{height:600,width:600,src:"https://".concat(null==w?void 0:null===(h=w.assetFile)||void 0===h?void 0:h.s3Path)}};return{[d.jx]:{height:600,width:600,src:(0,C.c0)((0,n._)((0,a._)({},i),{angle:null==i?void 0:null===(y=i.metadata)||void 0===y?void 0:null===(g=y.cart)||void 0===g?void 0:g.angle,displays:S}))}}}return s?{[d.pI]:{height:i.height||(null===(t=i.preview)||void 0===t?void 0:t.height),width:i.width||(null===(r=i.preview)||void 0===r?void 0:r.width),src:i.preview||i.thumb}}:{[d.jx]:{height:(null===(o=i.largeThumb)||void 0===o?void 0:o.height)||(null===(l=i.preview)||void 0===l?void 0:l.height),width:(null===(c=i.largeThumb)||void 0===c?void 0:c.width)||(null===(v=i.preview)||void 0===v?void 0:v.width),src:null===(m=i.preview)||void 0===m?void 0:m.url}}},Y=e=>{var t,r,i,s,o,l,c,v,m,_,f,g,y,{item:b,price:C,priceType:w,currency:S,subscriptionId:I,hasCreditsRemaining:A,isUnlimited:T,isUnavailableSubscription:k}=e,E=G({item:b}),P=q({item:b}).replace("-150nw","-260nw")||(null==E?void 0:null===(t=E[d.jx])||void 0===t?void 0:t.src),x=null===(r=b.assets)||void 0===r?void 0:r.find(e=>{var{assetClass:t}=e;return t===p.Iw}),j=[u.m$,u.W1].includes(b.itemType)&&!b.src,U=null===(i=b.meta)||void 0===i?void 0:i.search_context;return(null===(o=b.metadata)||void 0===o?void 0:null===(s=o.cart)||void 0===s?void 0:s.searchContext)&&(U=(0,h.fF)({trackingId:null===(_=b.metadata)||void 0===_?void 0:null===(m=_.cart)||void 0===m?void 0:null===(v=m.searchContext)||void 0===v?void 0:v.searchTrackingId,searchTerm:null===(y=b.metadata)||void 0===y?void 0:null===(g=y.cart)||void 0===g?void 0:null===(f=g.searchContext)||void 0===f?void 0:f.searchTerm})),(0,a._)((0,n._)((0,a._)((0,n._)((0,a._)({},b),{id:b.itemId}),[u.W1,u.m$,u.uH,u.rr].some(e=>e===b.itemType)&&{image:{id:b.itemId,categories:b.categories,description:b.description||b.subhead||"",url:P,isEditorial:!!b.isEditorial,isPremium:!!b.isPremium,displays:E,permalink:b.permalink,isIllustration:b.isIllustration,isVector:b.isVector}}),{type:b.itemType,isFootageSelect:b.footageSelect,price:C,priceType:w,waveformPng:b.waveformPng||(null==x?void 0:x.externalUrl),currency:S,licenseId:(null===(c=b.metadata)||void 0===c?void 0:null===(l=c.cart)||void 0===l?void 0:l.licenseId)||"",subscriptionId:I,hasCreditsRemaining:A,isPixelSquid:b.itemType===u.m$,isUnavailableAsset:B({asset:b}),isUnlimited:T,isUnavailableSubscription:k,meta:(0,a._)({},U?{search_context:U}:{})}),j&&{src:P})},W=e=>{var{cartItems:t=[],subscriptions:r}=e;return t.filter(e=>[u.W1,u.m$,u.G_,u.FY,u.M9,u.uH,u.rr].includes(e.itemType)).map(e=>{var t=D({item:e,subscriptions:r}),{price:i=0,priceType:a=_.EV}=(0,k.q)({uniqueSubscription:t});return Y({item:e,price:i,priceType:a,currency:(null==t?void 0:t.creditCurrency)||"",subscriptionId:(null==t?void 0:t.id)||"-",isUnavailableSubscription:!t,hasCreditsRemaining:(0,S.X)({subscription:t}),isUnlimited:(0,I.t)({subscription:t})})})},V=e=>{var{isPrimary:t,isLedger:r=!1}=e;return(0,o.Xl)((0,a._)({urlParams:{isPrimary:t}},r&&{queryParams:{isLedger:r}})).formattedUrl},Z=e=>{var{isPrimary:t}=e,r=(0,F.i9)(),{data:i}=(0,x.R7)();return(0,L.Ay)(r&&i?V({isPrimary:t}):null,e=>U.C2.get(e).then(e=>{var{data:t}=e;return t&&(0,n._)((0,a._)({},t),{items:W({cartItems:t.items,subscriptions:i})})}).catch(t=>{var r,i;throw null===(i=window.NREUM)||void 0===i||null===(r=i.recordCustomEvent)||void 0===r||r.call(i,f.s,{url:e,errorMessage:t.message,errorStack:t.stack}),t}))},H=e=>{var{isPrimary:t}=e,r=(0,F.i9)();return(0,L.Ay)(r?V({isPrimary:t,isLedger:!0}):null,e=>U.C2.get(e).then(e=>{var{data:t}=e;return t&&(0,n._)((0,a._)({},t),{items:t.items.filter(e=>[u.W1,u.m$,u.G_,u.FY,u.M9,u.uH,u.rr].includes(e.itemType))})}).catch(t=>{var r,i;throw null===(i=window.NREUM)||void 0===i||null===(r=i.recordCustomEvent)||void 0===r||r.call(i,f.s,{url:e,errorMessage:t.message,errorStack:t.stack}),t}))},J=e=>{var{cartItems:t=[],assetEligibleSubscriptions:r}=e;return t.map(e=>{var t,i,{id:a,metadata:{cart:{licenseId:n}={}}={}}=null!=e?e:{},s=null!==(i=null==r?void 0:null===(t=r[a])||void 0===t?void 0:t.licenseSubscriptions.find(e=>e.license===n))&&void 0!==i?i:null,{price:o=0,priceType:l=_.EV}=(0,k.b)({uniqueSubscription:s});return Y({item:e,price:o,priceType:l,currency:(null==s?void 0:s.creditCurrency)||"",subscriptionId:(null==s?void 0:s.id)||"-",isUnavailableSubscription:!s,hasCreditsRemaining:(0,S.X)({subscription:s}),isUnlimited:(0,I.t)({subscription:s})})})},X=()=>{var e,{mutate:t}=(0,L.iX)(),[r,s]=(0,O.useState)({status:"",error:void 0}),[d,p]=(0,O.useState)(!1),_=(0,O.useRef)(!1),{productAddedAnalyticsEvent:f,cartViewedAnalyticsEvent:h,productRemovedAnalyticsEvent:b}=(0,N.f)(),{getSearchContext:C}=(0,M.J)(),w=(0,z.useRouter)(),{queueIpReview:S}=(0,P.F)({trackingId:null===(e=C())||void 0===e?void 0:e.search_tracking_id}),I=(0,O.useCallback)(e=>{void 0===(null==e?void 0:e.cartId)||_.current||(_.current=!0,h(e))},[_,h]),A=(0,O.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(e=>{var{id:r}=e;return -1===t.findIndex(e=>{var{id:t}=e;return r===t})})},[]),T=(0,O.useCallback)(e=>{var{cartItems:t=[],itemsToAdd:r=[]}=e,i=[...t];return r.forEach(e=>{var t=(0,y.Qk)({asset:e}),r=i.findIndex(r=>{var{id:i,type:a}=r;return i===e.id&&a===t});r>-1?i[r]=(0,a._)({},e):i.unshift((0,n._)((0,a._)({},e),{addedTime:new Date}))}),i},[]),k=(0,O.useCallback)(function(){var e=(0,i._)(function*(e){var t,{items:r,licenseId:n,licenseAsJpeg:s}=e;return Promise.all(null==r?void 0:r.map((t=(0,i._)(function*(e){var t=(0,y.Qk)({asset:e}),r=n||e.licenseId,i=s||e.licenseAsJpeg,o=yield(0,g.og)({asset:e,licenseName:r});return{item_id:e.id,item_type:t,metadata:{cart:(0,a._)({license_id:r,license_as_jpeg:i,subscription_id:e.subscriptionId,size:o.content_size,format:o.content_format,sizes:(0,g.Rj)({asset:e}),search_context:C(e),source:[u.uH,u.rr].some(e=>e===t)?m.Au:""},t===u.m$&&{angle:o.angle})}}}),function(e){return t.apply(this,arguments)})))});return function(t){return e.apply(this,arguments)}}(),[C]),E=(0,O.useCallback)(function(){var e=(0,i._)(function*(e){var{cart:r,eventLabel:i,gridItems:d,isPrimary:u=!0,itemsToAdd:m,licenseId:_,formatType:h,licensePrice:g,mutateCart:y,withOptimisticUpdate:w=!0,pageSection:I,listId:A}=e;try{var E=m.map(e=>(0,n._)((0,a._)({},e),{meta:(0,a._)({search_context:C(e)},e.meta)}));s({status:"",error:void 0}),p(!1);var P=T({cartItems:r.items,itemsToAdd:E});if(P.length>v.Zm){s({status:l.Nz}),p(!0);return}w&&y(e=>(0,n._)((0,a._)({},e),{items:P}),!1);var x=(0,o.bE)({urlParams:{isPrimary:u}}).formattedUrl,j=yield k({items:E,licenseId:_,licenseAsJpeg:h===c.kr});yield U.C2.post(x,j),s({status:l.qO}),S(m),u&&E.forEach(e=>{var t=r.items.find(t=>{var{id:r}=t;return r===e.id});t&&_!==t.licenseId&&b({cart:r,eventLabel:i,gridItems:d,items:[e],matchingCartItem:t,pageSection:I}),f({cart:r,eventLabel:i,gridItems:d,items:[e],licenseId:_,licensePrice:g,pageSection:I,listId:A})})}catch(e){s({status:l.Nz,error:e})}finally{yield t(V({isPrimary:u,isLedger:!0})),yield t(V({isPrimary:u}))}});return function(t){return e.apply(this,arguments)}}(),[T,k,C,f,b,t,S]);return{triggerCartViewedEvent:I,addCartItems:E,removeCartItems:(0,O.useCallback)(function(){var e=(0,i._)(function*(e){var{cartData:r,eventLabel:i,gridItems:s,isPrimary:l=!0,itemsToRemove:c=[],mutateCart:d,pageSection:u,routePathProps:v,withOptimisticUpdate:m=!0,mutateCallback:p}=e;try{m&&d(e=>(0,n._)((0,a._)({},e),{items:A(e.items,c)}),!1);var _=(0,o.dt)({urlParams:{isPrimary:l}}).formattedUrl;yield U.C2.delete(_,{data:c.map(e=>({item_id:e.id,item_type:(0,y.Qk)({asset:e})}))}),l&&b({cart:r,eventLabel:i,gridItems:s,items:c,pageSection:u}),v&&w.push(...v)}catch(e){}finally{p?p({isPrimary:l}):(yield t(V({isPrimary:l,isLedger:!0})),yield t(V({isPrimary:l})))}});return function(t){return e.apply(this,arguments)}}(),[A,b,w,t]),moveToSaveForLater:(0,O.useCallback)(function(){var e=(0,i._)(function*(e){var{eventLabel:t,itemsToMove:r,pageSection:i,primaryCart:c,savedForLaterCart:d,mutatePrimaryCart:u,mutateSavedForLaterCart:m}=e;s({status:"",error:void 0}),p(!1);var _=T({cartItems:d.items,itemsToAdd:r});if(_.length>v.Zm)throw s({status:l.Nz}),p(!0),Error(R);u(e=>(0,n._)((0,a._)({},e),{items:A(e.items,r)}),!1),m(e=>(0,n._)((0,a._)({},e),{items:_}),!1);var f=(0,o.cb)({urlParams:{fromCartType:v.jT,toCartType:v.pw}}).formattedUrl,h=yield k({items:r});yield U.C2.post(f,h),b({cart:c,eventLabel:t,items:r,pageSection:i})});return function(t){return e.apply(this,arguments)}}(),[T,k,b,A]),moveToPrimary:(0,O.useCallback)(function(){var e=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:c}=e;s({status:"",error:void 0}),p(!1);var d=T({cartItems:r.items,itemsToAdd:t});if(d.length>v.Zm)throw s({status:l.Nz}),p(!0),Error(R);c(e=>(0,n._)((0,a._)({},e),{items:A(e.items,t)}),!1),i(e=>(0,n._)((0,a._)({},e),{items:d}),!1);var u=(0,o.cb)({urlParams:{fromCartType:v.pw,toCartType:v.jT}}).formattedUrl,m=yield k({items:t});yield U.C2.post(u,m),f({cart:r,items:t})});return function(t){return e.apply(this,arguments)}}(),[T,k,f,A]),addToCartStatus:r,setAddToCartStatus:s,isSizeLimitWarning:d}},$=e=>{var{cartItems:t}=e,{data:r}=(0,x.R7)(),i=(0,j.h)(),{isLoading:a}=i,n=(0,s._)(i,["isLoading"]),o=(e=>{var{items:t}=e;return null==t?void 0:t.some(e=>{var{hasCreditsRemaining:t}=e;return!t})})({items:t}),{amountType:l,hasInsufficientSubscriptionCredits:c,insufficientAmount:d,hasLowDebitableBalance:u}=(0,A.E)({items:t,isLoading:!r||a,subscriptions:r,userCapabilities:n});return{amountType:l,isDebitableUser:(0,w.fY)({userCapabilities:n}),userCanViewDebitableBalance:(0,w.Pl)({userCapabilities:n}),hasInsufficientCartItemsCredits:o,hasInsufficientSubscriptionCredits:c,insufficientAmount:d,hasLowDebitableBalance:u}}},50717:(e,t,r)=>{r.d(t,{M:()=>v});var i=r(51895),a=r(63870),n=r(93255),s=r(18570),o=r(65915),l=r(36908),c=r(22183),d=r(74490),u=r(34559),v=function(){var{queryParams:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t}=(0,l.rA)(),r=(0,i._)({target:n.A_I,site_name:s.RJ,setting_type:n.A_I},e);return(0,c.P)((null==t?void 0:t.id)&&(null==t?void 0:t.organizationId)&&(0,a.h_)({queryParams:r}).formattedUrl,e=>d.Bn.get(e).then(e=>(0,u.A)(e.data)),{dedupingInterval:o.iW})}},22717:(e,t,r)=>{r.d(t,{Z:()=>i});var i=e=>e&&"string"==typeof e?"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)):""}}]);
//# sourceMappingURL=74742-25f630c1ceda82db.js.map