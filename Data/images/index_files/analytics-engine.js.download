(()=>{var e={1549:(e,t,n)=>{var r=n(2032),a=n(3862),o=n(6721),i=n(2749),s=n(5749);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,e.exports=c},79:(e,t,n)=>{var r=n(3702),a=n(80),o=n(4739),i=n(8655),s=n(1175);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,e.exports=c},8223:(e,t,n)=>{var r=n(6110)(n(9325),"Map");e.exports=r},3661:(e,t,n)=>{var r=n(3040),a=n(7670),o=n(289),i=n(4509),s=n(2949);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,e.exports=c},7217:(e,t,n)=>{var r=n(79),a=n(1420),o=n(938),i=n(3605),s=n(9817),c=n(945);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=a,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=c,e.exports=u},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},7828:(e,t,n)=>{var r=n(9325).Uint8Array;e.exports=r},1033:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},695:(e,t,n)=>{var r=n(8096),a=n(2428),o=n(6449),i=n(3656),s=n(361),c=n(7167),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&a(e),d=!n&&!l&&i(e),p=!n&&!l&&!d&&c(e),v=n||l||d||p,f=v?r(e.length,String):[],y=f.length;for(var g in e)!t&&!u.call(e,g)||v&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,y))||f.push(g);return f}},7805:(e,t,n)=>{var r=n(3360),a=n(5288);e.exports=function(e,t,n){(void 0!==n&&!a(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},6547:(e,t,n)=>{var r=n(3360),a=n(5288),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];o.call(e,t)&&a(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},6025:(e,t,n)=>{var r=n(5288);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},3360:(e,t,n)=>{var r=n(3243);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9344:(e,t,n)=>{var r=n(3805),a=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},6649:(e,t,n)=>{var r=n(3221)();e.exports=r},2552:(e,t,n)=>{var r=n(1873),a=n(659),o=n(9350),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},7534:(e,t,n)=>{var r=n(2552),a=n(346);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},5083:(e,t,n)=>{var r=n(1882),a=n(7296),o=n(3805),i=n(7473),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,p=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?p:s).test(i(e))}},4901:(e,t,n)=>{var r=n(2552),a=n(294),o=n(346),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[r(e)]}},2903:(e,t,n)=>{var r=n(3805),a=n(5527),o=n(181),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=a(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},5250:(e,t,n)=>{var r=n(7217),a=n(7805),o=n(6649),i=n(2824),s=n(3805),c=n(7241),u=n(4974);e.exports=function e(t,n,l,d,p){t!==n&&o(n,(function(o,c){if(p||(p=new r),s(o))i(t,n,c,l,e,d,p);else{var v=d?d(u(t,c),o,c+"",t,n,p):void 0;void 0===v&&(v=o),a(t,c,v)}}),c)}},2824:(e,t,n)=>{var r=n(7805),a=n(3290),o=n(1961),i=n(3007),s=n(5529),c=n(2428),u=n(6449),l=n(3693),d=n(3656),p=n(1882),v=n(3805),f=n(1331),y=n(7167),g=n(4974),b=n(9884);e.exports=function(e,t,n,h,E,k,x){var _=g(e,n),m=g(t,n),S=x.get(m);if(S)r(e,n,S);else{var w=k?k(_,m,n+"",e,t,x):void 0,j=void 0===w;if(j){var O=u(m),I=!O&&d(m),A=!O&&!I&&y(m);w=m,O||I||A?u(_)?w=_:l(_)?w=i(_):I?(j=!1,w=a(m,!0)):A?(j=!1,w=o(m,!0)):w=[]:f(m)||c(m)?(w=_,c(_)?w=b(_):v(_)&&!p(_)||(w=s(m))):j=!1}j&&(x.set(m,w),E(w,m,h,k,x),x.delete(m)),r(e,n,w)}}},9302:(e,t,n)=>{var r=n(3488),a=n(6757),o=n(2865);e.exports=function(e,t){return o(a(e,t,r),e+"")}},9570:(e,t,n)=>{var r=n(7334),a=n(3243),o=n(3488),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},8096:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},9653:(e,t,n)=>{var r=n(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},3290:(e,t,n)=>{e=n.nmd(e);var r=n(9325),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?r.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},1961:(e,t,n)=>{var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},3007:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},1791:(e,t,n)=>{var r=n(6547),a=n(3360);e.exports=function(e,t,n,o){var i=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=o?o(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),i?a(n,u,l):r(n,u,l)}return n}},5481:(e,t,n)=>{var r=n(9325)["__core-js_shared__"];e.exports=r},999:(e,t,n)=>{var r=n(9302),a=n(6800);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&a(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t}))}},3221:e=>{e.exports=function(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var c=i[e?s:++a];if(!1===n(o[c],c,o))break}return t}}},3243:(e,t,n)=>{var r=n(6110),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},2651:(e,t,n)=>{var r=n(4218);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},6110:(e,t,n)=>{var r=n(5083),a=n(392);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},8879:(e,t,n)=>{var r=n(4335)(Object.getPrototypeOf,Object);e.exports=r},659:(e,t,n)=>{var r=n(1873),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[s]=n:delete e[s]),a}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},2032:(e,t,n)=>{var r=n(1042);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6721:(e,t,n)=>{var r=n(1042),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},2749:(e,t,n)=>{var r=n(1042),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},5749:(e,t,n)=>{var r=n(1042);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5529:(e,t,n)=>{var r=n(9344),a=n(8879),o=n(5527);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(a(e))}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},6800:(e,t,n)=>{var r=n(5288),a=n(4894),o=n(361),i=n(3805);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?a(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7296:(e,t,n)=>{var r,a=n(5481),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5527:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},80:(e,t,n)=>{var r=n(6025),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},4739:(e,t,n)=>{var r=n(6025);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},8655:(e,t,n)=>{var r=n(6025);e.exports=function(e){return r(this.__data__,e)>-1}},1175:(e,t,n)=>{var r=n(6025);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},3040:(e,t,n)=>{var r=n(1549),a=n(79),o=n(8223);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},7670:(e,t,n)=>{var r=n(2651);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},289:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).get(e)}},4509:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).has(e)}},2949:(e,t,n)=>{var r=n(2651);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},1042:(e,t,n)=>{var r=n(6110)(Object,"create");e.exports=r},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},6009:(e,t,n)=>{e=n.nmd(e);var r=n(4840),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4335:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},6757:(e,t,n)=>{var r=n(1033),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=a(o.length-t,0),c=Array(s);++i<s;)c[i]=o[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=o[i];return u[t]=n(c),r(e,this,u)}}},9325:(e,t,n)=>{var r=n(4840),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},4974:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},2865:(e,t,n)=>{var r=n(9570),a=n(1811)(r);e.exports=a},1811:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},1420:(e,t,n)=>{var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},938:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},945:(e,t,n)=>{var r=n(79),a=n(8223),o=n(3661);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(e,t),this.size=n.size,this}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7334:e=>{e.exports=function(e){return function(){return e}}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3488:e=>{e.exports=function(e){return e}},2428:(e,t,n)=>{var r=n(7534),a=n(346),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},6449:e=>{var t=Array.isArray;e.exports=t},4894:(e,t,n)=>{var r=n(1882),a=n(294);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},3693:(e,t,n)=>{var r=n(4894),a=n(346);e.exports=function(e){return a(e)&&r(e)}},3656:(e,t,n)=>{e=n.nmd(e);var r=n(9325),a=n(9935),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;e.exports=c},1882:(e,t,n)=>{var r=n(2552),a=n(3805);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1331:(e,t,n)=>{var r=n(2552),a=n(8879),o=n(346),i=Function.prototype,s=Object.prototype,c=i.toString,u=s.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},7167:(e,t,n)=>{var r=n(4901),a=n(7301),o=n(6009),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},7241:(e,t,n)=>{var r=n(695),a=n(2903),o=n(4894);e.exports=function(e){return o(e)?r(e,!0):a(e)}},5364:(e,t,n)=>{var r=n(5250),a=n(999)((function(e,t,n){r(e,t,n)}));e.exports=a},9935:e=>{e.exports=function(){return!1}},9884:(e,t,n)=>{var r=n(1791),a=n(7241);e.exports=function(e){return r(e,a(e))}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}function r(){return window.unifiedSDK}function a(e){return new Proxy(e,{set:()=>!0,get:(e,t)=>{const n=e[t];return"object"==typeof n&&null!==n?a(n):n}})}function o(e=null){const t={},n=new Set;let r,a=!1;return Object.defineProperty(t,"__isObservable",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t.subscribe=o=>{if("function"!=typeof o)throw new Error("Invalid Argument: subscribe needs to be called with a function");return n.add(o),a||(a=!0,"function"==typeof e&&(r=e(t.next))),()=>{if(n.delete(o),0===n.size)return t.dispose()}},t.next=e=>{const t=[];return n.forEach((n=>{t.push(n(e))})),Promise.all(t)},t.pipe=(...e)=>{if(0===e.length)throw new Error("No pipe callback provided");let n=t;return e.forEach((e=>{if("function"!=typeof e)throw new Error("Invalid Argument: pipe can only be called with functions");const t=n;n=o((n=>t.subscribe((t=>e(t,n)))))})),n},t.dispose=async()=>{n.clear(),a=!1,r instanceof Promise&&(r=await r),"function"==typeof r&&await r()},t}function i({survey:e,surveyPage:t}){return{properties:{sdkSurveyId:[e.state.initialSurveyId],sdkSurveyType:[e.state.surveyOptions.contextNode?"embedded":"modal"],sdkSurveyRenderer:["internal"],sdkSurveyLocale:[e.state.locale]},data:{sdkSurveyPageId:t.state.pageId,sdkSurveyPageType:t.state.type,sdkSurveyDuration:Date.now()-e.state.startTime}}}function s({storyInstance:e}){return{data:{sdkStoryName:e?.state.name??null}}}function c({storyInstance:e,options:t}){return{properties:{sdkInviteType:[t?.mode??"notification"]},data:{sdkStoryName:e?.state.name??null}}}function u({storyInstance:e,...t}){return{properties:{sdkOnExitGroupId:[t.groupId],sdkOnExitProjectId:[t.projectId],sdkOnExitCampaignId:[t.campaignId],sdkOnExitMode:[t.mode]},data:{sdkStoryName:e?.state.name??null}}}function l({storyInstance:e}){return{data:{sdkStoryName:e?.state.name,sdkStoryCurrentStep:e?.state.currentStep}}}function d({storyInstance:e}){return{data:{sdkStoryName:e?.state.name}}}function p({integration:e}){return{properties:{sdkIntegrationName:[e.name]}}}function v({recordingEngine:e}){return{data:{},properties:{sdkRecordingType:[e?.state.recordingType??null],sdkRecordingToBuffer:[e?.state.conditional??null],sdkRecordingPauseReason:[e?.state.pauseReason??null],sdkRecordingStatus:[e?.state.status??null]}}}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);const f=[{internalEvent:"visitor:pageView",analyticEvent:"sdkPageView",callback:async function(){const{loader:e}=r(),[t]=await e.requireModules(["visitor"]),n=new URL(location.href),a=new URLSearchParams(n.search);return{properties:{sdkUtmSource:[a.get("utm_source")],sdkUtmMedium:[a.get("utm_medium")],sdkUtmCampaign:[a.get("utm_campaign")],sdkUtmTerm:[a.get("utm_term")],sdkUtmContent:[a.get("utm_content")]},data:{sdkReferrer:document.referrer,sdkPageViews:t.getSessionPageCount(),sdkGoogleAnalyticsId:t.getPropertyValue("Google Analytics Id"),sdkAdobeId:t.getPropertyValue("Adobe Id")}}}},{internalEvent:"surveyEngine:surveyStarted",analyticEvent:"sdkSurveyStarted",callback:function({survey:e,isModalSurvey:t,storyInstance:n}){return{properties:{sdkSurveyId:[e.state.initialSurveyId],sdkSurveyType:[t?"modal":"embedded"],sdkSurveyRenderer:["internal"],sdkSurveyLocale:[e.state.locale]},data:{sdkStoryName:n?.state.name??null}}}},{internalEvent:"rulesEngine:externalSurveyStarted",analyticEvent:"sdkSurveyStarted",callback:function({target:e,locale:t,surveyId:n,storyInstance:r}){return{properties:{sdkSurveyId:[n],sdkSurveyType:[e],sdkSurveyRenderer:["external"],sdkSurveyLocale:[t??"default"]},data:{sdkStoryName:r?.state.name??null}}}},{internalEvent:"surveyEngine:surveyPageRendered",analyticEvent:"sdkSurveyPageRendered",callback:i},{internalEvent:"surveyEngine:surveyNavigation",analyticEvent:"sdkSurveyNavigated",callback:function({survey:e,surveyPage:t,action:n}){const r=i({survey:e,surveyPage:t});return r.data.sdkSurveyNavigationDirection=n,r}},{internalEvent:"surveyEngine:surveyFinished",analyticEvent:"sdkSurveyCompleted",callback:i},{internalEvent:"surveyEngine:surveyClosed",analyticEvent:"sdkSurveyClosed",callback:i},{internalEvent:"surveyEngine:surveyRenderFailed",analyticEvent:"sdkSurveyError",callback:function({errorMessage:e,surveyId:t}){return{properties:{sdkSurveyId:[t],sdkSurveyRenderer:["internal"]},data:{sdkSurveyRenderError:e}}}},{internalEvent:"rulesEngine:badgeRendered",analyticEvent:"sdkBadgeShown",callback:s},{internalEvent:"rulesEngine:badgeAccepted",analyticEvent:"sdkBadgeAccepted",callback:s},{internalEvent:"rulesEngine:badgeTimeout",analyticEvent:"sdkBadgeTimeout",callback:s},{internalEvent:"rulesEngine:inviteRendered",analyticEvent:"sdkInviteShown",callback:c},{internalEvent:"rulesEngine:inviteAccepted",analyticEvent:"sdkInviteAccepted",callback:c},{internalEvent:"rulesEngine:inviteDeclined",analyticEvent:"sdkInviteDeclined",callback:c},{internalEvent:"rulesEngine:onExitModalRendered",analyticEvent:"sdkOnExitModalShown",callback:u},{internalEvent:"rulesEngine:onExitModalCompleted",analyticEvent:"sdkOnExitModalCompleted",callback:u},{internalEvent:"rulesEngine:onExitModalAborted",analyticEvent:"sdkOnExitModalAborted",callback:u},{internalEvent:"rulesEngine:onExitModalError",analyticEvent:"sdkOnExitModalError",callback:function(e){const t=u(e);return t.data.sdkOnExitError=e.error,t}},{internalEvent:"rulesEngine:storyStopped",analyticEvent:"sdkStoryStopped",callback:l},{internalEvent:"rulesEngine:storyCompleted",analyticEvent:"sdkStoryCompleted",callback:l},{internalEvent:"rulesEngine:storyError",analyticEvent:"sdkStoryError",callback:l},{internalEvent:"rulesEngine:mouseOffInitialized",analyticEvent:"sdkMouseOffInitialized",callback:d},{internalEvent:"rulesEngine:mouseOffTriggered",analyticEvent:"sdkMouseOffTriggered",callback:d},{internalEvent:"integrationManager:integrationStarted",analyticEvent:"sdkIntegrationStarted",callback:p},{internalEvent:"integrationManager:integrationFailed",analyticEvent:"sdkIntegrationFailed",callback:p},{internalEvent:"recordingEngine:recordingStarted",analyticEvent:"sdkRecordingStarted",callback:v},{internalEvent:"recordingEngine:recordingStopped",analyticEvent:"sdkRecordingStopped",callback:v},{internalEvent:"recordingEngine:recordingPaused",analyticEvent:"sdkRecordingPaused",callback:v},{internalEvent:"recordingEngine:recordingActivated",analyticEvent:"sdkRecordingActivated",callback:v},{internalEvent:"recordingEngine:recordingError",analyticEvent:"sdkRecordingError",callback:function(e){const t=v(e);return t.properties.sdkRecordingError=[e.type],t}},{internalEvent:"observable:scoringEngine.getScoreSeverityChangeObservable",analyticEvent:"sdkLiveScoreUpdate",callback:function(e){return{properties:{groupName:[e.data.group],severityLevel:[e.data.severityLevel]},data:{score:e.data.score}}}},{internalEvent:"observable:scoringEngine.getRunningIndicatorsObservable",analyticEvent:"sdkLiveScoreIndicator",callback:function(e){return{properties:{indicatorType:[e.type],scoreGroup:e.groups},data:{timestamp:e.timestamp,...e.data}}}}];var y=n(5364);function g({visitor:e}){const{logger:t,events:n,config:i,loader:s}=r(),c=i.getConfig("analyticsEngine"),u={},l=function(e,t,...n){return o((r=>{const a=e=>{try{r(e)}catch(e){}};return t.forEach((t=>e.addEventListener(t,a,...n))),()=>{t.forEach((t=>e.removeEventListener(t,a)))}}))}(document,["visibilitychange"]),d={enabled:b(),queuedEvents:[],addedDefaults:{}};let p,v;return u.state=a(d),u.start=async()=>{if(!d.enabled)return!1;if(!c.customerId||"NULL"===c.customerId)return t.warn("Analytics Engine: No customerId has been set. Please add the customerId in config."),!1;const[e]=await s.requireModules(["customcodeManager"]);if(await e.whenCustomcodeReady(),!d.enabled)return!1;p=setInterval(u.sendEvents,c.throttleTime),l.subscribe((()=>{"hidden"===document.visibilityState&&u.sendEvents()})),v=function(e){const{events:t}=r(),n=[];for(const{internalEvent:r,analyticEvent:a,callback:o}of f){const i=async t=>e(a,await o(t));if(r.includes("observable:")){const e=h(r.replace("observable:",""));n.push(e.subscribe(i))}else{const e=t.getInitialEvent(r);e&&i(e),n.push(t.listenEvent(r,i))}}return()=>{n.forEach((e=>e()))}}(u.collectEvent),n.triggerEvent("analyticsEngine:ready",{analyticsEngine:u})},u.stop=()=>{d.enabled=!1,l.dispose(),v?.(),clearInterval(p)},u.getVisibilityChangeObservable=()=>l,u.addEventDefaults=(e,t)=>"string"==typeof e&&t?(Array.isArray(d.addedDefaults[e])||(d.addedDefaults[e]=[]),d.addedDefaults[e].push(t),t):null,u.getEventDefaults=t=>{const{siteKey:n,container:r,updatedAt:a}=i.getConfig("global"),o=c[t]?.samplingRate??c.defaultSamplingRate,s={properties:{sdkSiteKey:[n],sdkContainer:[r]},data:{sdkConfigDate:a,sdkPageUrl:location.href,sdkVisitorId:e.getVisitorId(),sdkPageId:e.getCurrentPageId(),sdkEventSamplingRate:o}},u=[...d.addedDefaults.global||[],...d.addedDefaults[t]||[]].reduce(((e,t)=>{const n="function"==typeof t?t():t;return y(e,n),e}),{});return y(s,u),s},u.collectEvent=(n,r={})=>{if(!d.enabled||!n)return null;const a=c.events[n]||{};if(!1===a.enabled)return t.log(`Analytics Engine: Cannot add event "${n}" because it is deactivated in config.`),null;if(!e.checkRate(a.samplingRate??c.defaultSamplingRate))return t.log(`Analytics Engine: Cannot add event "${n}" because sampling rate has not matched.`),null;const o=u.getEventDefaults(n);r.name=n,r.timestamp=(new Date).toISOString(),r.timezone=(new Date).getTimezoneOffset(),y(r,o);for(const e in r.properties)Array.isArray(r.properties[e])&&![null,void 0].includes(r.properties[e][0])||delete r.properties[e];for(const e in r.data)[null,void 0].includes(r.data[e])&&delete r.data[e];return d.queuedEvents.push(r),r},u.clearEventQueue=()=>{d.queuedEvents=[]},u.sendEvents=async()=>{if(!d.queuedEvents.length)return;const n=e.getBrowserAndVersion(),r={customerId:c.customerId,appId:"unifiedwebsdk",userId:e.getVisitorId(),deviceProfile:{sdkOperatingSystem:e.getPlatform(),sdkSdkVersion:unifiedSDK.version,sdkBrowserName:n.browser,sdkBrowserVersion:n.version,sdkDeviceType:e.getDeviceType(),sdkProductType:"unified-websdk"},events:d.queuedEvents};u.clearEventQueue();try{await fetch(u.getIngestUrl(),{method:"POST",headers:{"Content-Type":"application/json","Request-API-Version":"1.0.0"},body:JSON.stringify(r),keepalive:!0}),t.info("Analytics Engine: Analytic event(s) sent to big data endpoint.",r)}catch(e){return t.error("Analytics Engine: Failed to send analytics data.",e),null}return r},u.getIngestUrl=()=>{const e=i.getConfig("servers.bigData");return`https://${e.host}${e.ingestEndpoint}`},u.getDebugData=()=>d,u}function b(){const{logger:e,config:t}=r(),{enabled:n}=t.getConfig("analyticsEngine");return n?!!t.getConfig("servers.bigData.host")||(e.warn("Analytics Engine: Disabled because no server host has been set in config."),!1):(e.log("Analytics Engine: Disabled by config."),!1)}function h(e){const{logger:t,config:n}=r(),a=e.replace(/\..*/,""),i=n.getConfig(a);return i&&i.enabled?o((async n=>{const a=await function(...e){return r().run(...e)}(e);a&&"function"==typeof a.subscribe?a.subscribe((e=>n(e))):t.warn(`Analytics Engine: Observable from module ${e} could not be subscribed.`)})):(t.log(`Analytics Engine: Module ${a} is not enabled, events for ${e} will not be subscribed.`),o())}const{loader:E}=r();E.resolveModule("analyticsEngine",(async()=>{const[e]=await E.requireModules(["visitor"]);return g({visitor:e})}))})();